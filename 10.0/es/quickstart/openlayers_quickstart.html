<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Guía de inicio rápido de OpenLayers &mdash; OSGeo-Live 10.0
 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '10.0
',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="OSGeo-Live 10.0
 Documentation" href="../../index.html" />
    <link rel="up" title="Quickstarts" href="toc.html" />
    <link rel="next" title="Guía de inicio rápido de osgEarth" href="osgearth_quickstart.html" />
    <link rel="prev" title="Guía de inicio rápido de OpenJUMP" href="openjump_quickstart.html" /> 
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>
    <link rel="shortcut icon" href="../../_images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../../_images/favicon.ico" type="image/x-icon">

  </head>
  <body role="document">
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../standards/standards.html">Standards</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>

    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="guia-de-inicio-rapido-de-openlayers">
<h1><a class="toc-backref" href="#id1">Guía de inicio rápido de OpenLayers</a><a class="headerlink" href="#guia-de-inicio-rapido-de-openlayers" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="http://openlayers.org/"><img alt="project logo" class="align-right" src="../../_images/logo-OpenLayers.png" style="width: 100.0px; height: 100.8px;" /></a>
<p>Esta Guía de Inicio Rápido describe algunos pasos básicos necesarios para empezar a trabajar con penLayers3: crear un mapa básico, añadir capas raster y vectorial y dar estilos a los elementos.</p>
<p>OpenLayers3 es una biblioteca de mapeo ligera para clientes web y móviles que usa tecnologías de navegadores modernos como HTML5, WebGL y CSS3.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#guia-de-inicio-rapido-de-openlayers" id="id1">Guía de inicio rápido de OpenLayers</a><ul>
<li><a class="reference internal" href="#conceptos-basicos" id="id2">Conceptos básicos</a></li>
<li><a class="reference internal" href="#un-mapa-basico" id="id3">Un mapa básico</a></li>
<li><a class="reference internal" href="#anadir-capas-raster" id="id4">Añadir capas raster</a></li>
<li><a class="reference internal" href="#anadir-capas-vectoriales" id="id5">Añadir capas vectoriales</a></li>
<li><a class="reference internal" href="#dar-estilo-a-las-entidades" id="id6">Dar estilo a las entidades</a></li>
<li><a class="reference internal" href="#trabajar-con-eventos" id="id7">Trabajar con eventos</a></li>
<li><a class="reference internal" href="#que-mas" id="id8">¿Qué más?</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="conceptos-basicos">
<h2><a class="toc-backref" href="#id2">Conceptos básicos</a><a class="headerlink" href="#conceptos-basicos" title="Permalink to this headline">¶</a></h2>
<p>Antes de empezar a trabajar con Openlayers es útil entender algunos conceptos:</p>
<p><strong>Map</strong>
Un mapa (<em>map</em>) es el componente central de OpenLayers. Para crear un mapa se necesitan una vista, una o más capas y un contenedor de destino.</p>
<p><strong>Vista</strong>
La vista (<em>view</em>) determina como se dibujará el mapa. Se usa para definir la resolución, el encuadre, etc. Es como una cámara a través de la cual se mira el contenido del mapa.</p>
<dl class="docutils">
<dt><strong>Capas</strong></dt>
<dd>Las capas (<em>layers</em>)  se pueden añadir al mapa de forma superpuesta, es decir, las capas más bajas se dibujan antes que las capas superiores. Las capas pueden ser <em>capas raster</em> (imágenes) o <em>capas vectoriales</em> (puntos/líneas/polígonos) .</dd>
<dt><strong>Source</strong></dt>
<dd>Cada capa tiene una fuente (<em>source</em>) adjuntada, la cual sabe como cargar el contenido de la capa.
En el caso de las <em>capas vectoriales</em>, esta fuente lee lso datos vectoriales usando una clase de <em>formato</em> (por ejemplo GeoJSON o KML) y rellena la capa con un conjunto de entidades.</dd>
<dt><strong>Entidades</strong></dt>
<dd>Las entidades (<em>Features</em>) representan cosas del mundo real y pueden representarse usando diferentes <em>geometrias</em> (<em>geometries</em>) como punto, línea o polígono, usando un estilo (<em>style</em>) dado, el cual determina su apariencia (grosor de línea, color de relleno, etc).</dd>
</dl>
</div>
<div class="section" id="un-mapa-basico">
<h2><a class="toc-backref" href="#id3">Un mapa básico</a><a class="headerlink" href="#un-mapa-basico" title="Permalink to this headline">¶</a></h2>
<p>En este paso se creará un mapa básico.</p>
<p>Crear un archivo, por ejemplo en /home/user/ llamado basic-map.html, y copiar lo siguiente dentro del mismo.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Basic map<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width&quot;</span><span class="p">&gt;</span>

        <span class="c">&lt;!-- OpenLayers CSS --&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://localhost/ol3/dist/ol.css&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>

        <span class="c">&lt;!-- Estilos personalizados --&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
          <span class="nn">#map</span> <span class="p">{</span>
            <span class="nb">width</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
            <span class="nb">height</span><span class="o">:</span> <span class="m">500px</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Basic map<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="c">&lt;!-- OpenLayers JS--&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://localhost/ol3/dist/ol-debug.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="c">&lt;!-- código de la app --&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
          <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
            <span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;map&#39;</span><span class="p">,</span>
            <span class="nx">renderer</span><span class="o">:</span> <span class="s1">&#39;canvas&#39;</span><span class="p">,</span>
            <span class="nx">layers</span><span class="o">:</span> <span class="p">[</span>
              <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
                <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">OSM</span><span class="p">()</span>
              <span class="p">})</span>
            <span class="p">],</span>
            <span class="nx">view</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span>
              <span class="nx">center</span><span class="o">:</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">proj</span><span class="p">.</span><span class="nx">transform</span><span class="p">([</span><span class="mf">2.1833</span><span class="p">,</span> <span class="mf">41.3833</span><span class="p">],</span> <span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span> <span class="s1">&#39;EPSG:3857&#39;</span><span class="p">),</span>
              <span class="nx">zoom</span><span class="o">:</span> <span class="mi">6</span>
            <span class="p">})</span>
          <span class="p">});</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Ej. 1</strong>: Estructura del código básico</p>
<p>Ahora, intentar abri el archivo basic-map.html desde un navegador web. Se debería ver lo siguiente:</p>
<a class="reference internal image-reference" href="../../_images/openlayers-basic-map.png"><img alt="../../_images/openlayers-basic-map.png" src="../../_images/openlayers-basic-map.png" style="width: 711.0px; height: 620.0px;" /></a>
<p>Notas:</p>
<ul class="simple">
<li>El código sigue la buena práctica de cargar el código Javascript al final del fichero html.</li>
<li>Un mapa OpenLayers map tiene que ser adjuntado a un elemento del DOM HTML, asi que se a creado un elemento <code class="docutils literal"><span class="pre">&lt;div&gt;</span></code> identificado con la etiqueta <em>map</em>.</li>
<li>Los mapas se preresentan con la clase <code class="docutils literal"><span class="pre">ol.Map</span></code>. Se especifica el elemento del DOM para dibujar el mapa dentro usando la propiedad <strong>target</strong>.</li>
<li>OpenLayers permite representar mapas usando tres mecanismos diferentes: Canvas, WebGL y DOM. Aquí se ha seleccionado <em>canvas</em> usando la propiedad <strong>renderer</strong>.</li>
<li>Un mapa muestra los datos contenidos en las capas, así que se ha creado una capa de tiles, representada por la clase <code class="docutils literal"><span class="pre">ol.layer.Tile</span></code>, que carga su contenido del proyecto OpenStreetMap, usando la clase de fuente <code class="docutils literal"><span class="pre">ol.source.OSM</span></code>.</li>
<li>Finalmente, se ha seleccionado la posición inicial de la <em>cámara</em> usando la clase <code class="docutils literal"><span class="pre">ol.View</span></code>, definiendo el zoom inicial y la localización del centro.</li>
</ul>
</div>
<div class="section" id="anadir-capas-raster">
<h2><a class="toc-backref" href="#id4">Añadir capas raster</a><a class="headerlink" href="#anadir-capas-raster" title="Permalink to this headline">¶</a></h2>
<p>Las capas raster más usadas son las capas de tiles, proporcionadas por los simpáticos de OpenStreetMap, MapQuest, Bing, etc. Las capas de tiles se representan por la clase <code class="docutils literal"><span class="pre">ol.layer.Tile``y</span> <span class="pre">deben</span> <span class="pre">usar</span> <span class="pre">una</span> <span class="pre">fuente</span> <span class="pre">que</span> <span class="pre">sepa</span> <span class="pre">cómo</span> <span class="pre">cargar</span> <span class="pre">tiles</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">proveedor</span> <span class="pre">concreto,</span> <span class="pre">como</span> <span class="pre">``ol.source.OSM</span></code> o <code class="docutils literal"><span class="pre">ol.source.MapQuest</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">osm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
  <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">OSM</span><span class="p">()</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">mq</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
  <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">MapQuest</span><span class="p">({</span>
    <span class="nx">layer</span><span class="o">:</span> <span class="s1">&#39;osm&#39;</span>
  <span class="p">})</span>
<span class="p">});</span>
</pre></div>
</div>
<p><strong>Ej. 2:</strong> Creación de capa ráster</p>
<p>Las capas se pueden añadir al mapa de dos formas:</p>
<ol class="arabic simple">
<li>Cuando se construye el <code class="docutils literal"><span class="pre">ol.Map</span></code>, usando la propiedad <code class="docutils literal"><span class="pre">layers</span></code>:</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">layers</span><span class="o">:</span> <span class="p">[</span><span class="nx">osm</span><span class="p">,</span> <span class="nx">mq</span><span class="p">]</span>
  <span class="p">...</span>
<span class="p">});</span>
</pre></div>
</div>
<p><strong>Ej. 3:</strong> Adición de capas al inicializar el mapa</p>
<ol class="arabic simple" start="2">
<li>Añadirlas manualmente con el método <code class="docutils literal"><span class="pre">map.addLayer()</span></code>:</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">osm</span><span class="p">);</span>
<span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mq</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Ej. 4:</strong> Añadir capas manualmente</p>
</div>
<div class="section" id="anadir-capas-vectoriales">
<h2><a class="toc-backref" href="#id5">Añadir capas vectoriales</a><a class="headerlink" href="#anadir-capas-vectoriales" title="Permalink to this headline">¶</a></h2>
<p>Las capas vectoriales están representadas por la clase <code class="docutils literal"><span class="pre">ol.layer.Vector</span></code> y deben usar una fuente capaz de leer el formato vectorial, como <code class="docutils literal"><span class="pre">ol.source.GeoJSON</span></code>, <code class="docutils literal"><span class="pre">ol.source.KML</span></code> o <code class="docutils literal"><span class="pre">ol.source.TopoJSON</span></code>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">vectorLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span>
  <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">GeoJSON</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;url_to_geojson_file&#39;</span>
  <span class="p">})</span>
<span class="p">});</span>

<span class="c1">// Añadir capa vectorial al mapa</span>
<span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">vectorLayer</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Ej. 5:</strong> Construcción de una capa vectorial GeoJSON</p>
<a class="reference internal image-reference" href="../../_images/openlayers-vector.png"><img alt="../../_images/openlayers-vector.png" src="../../_images/openlayers-vector.png" style="width: 518.0px; height: 277.0px;" /></a>
<p>Nota: en el código anterior se debe cambiar <code class="docutils literal"><span class="pre">url_to_file</span></code> para apuntar a un fichero GeoJSON válido localizado en el servidor.
Hay que tener en cuenta que la seguridad Javascript evitará usar como fuente juegos de datos de una URL externa o de un dominio diferente.</p>
<p>Las entidades se pueden crear también de forma manual. En este caso es necesario crear una geometría que represente a la entidad:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// Geometrias</span>
<span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span>
    <span class="nx">ol</span><span class="p">.</span><span class="nx">proj</span><span class="p">.</span><span class="nx">transform</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span> <span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span> <span class="s1">&#39;EPSG:3857&#39;</span><span class="p">)</span>
<span class="p">);</span>
<span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">Circle</span><span class="p">(</span>
    <span class="nx">ol</span><span class="p">.</span><span class="nx">proj</span><span class="p">.</span><span class="nx">transform</span><span class="p">([</span><span class="mf">2.1833</span><span class="p">,</span> <span class="mf">41.3833</span><span class="p">],</span> <span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span> <span class="s1">&#39;EPSG:3857&#39;</span><span class="p">),</span>
    <span class="mi">1000000</span>
<span class="p">);</span>

<span class="c1">// Entidades</span>
<span class="kd">var</span> <span class="nx">pointFeature</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">Feature</span><span class="p">(</span><span class="nx">point</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">circleFeature</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">Feature</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span>

<span class="c1">// Fuentes</span>
<span class="kd">var</span> <span class="nx">vectorSource</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span>
    <span class="nx">projection</span><span class="o">:</span> <span class="s1">&#39;EPSG:4326&#39;</span>
<span class="p">});</span>
<span class="nx">vectorSource</span><span class="p">.</span><span class="nx">addFeatures</span><span class="p">([</span><span class="nx">pointFeature</span><span class="p">,</span> <span class="nx">circleFeature</span><span class="p">]);</span>

<span class="c1">// Capas vectoriales</span>
<span class="kd">var</span> <span class="nx">vectorLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span>
  <span class="nx">source</span><span class="o">:</span> <span class="nx">vectorSource</span>
<span class="p">});</span>

<span class="c1">// Añadir capa vectorial al mapa</span>
<span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">vectorLayer</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Ej. 6:</strong> Añadir entidades a mano</p>
</div>
<div class="section" id="dar-estilo-a-las-entidades">
<h2><a class="toc-backref" href="#id6">Dar estilo a las entidades</a><a class="headerlink" href="#dar-estilo-a-las-entidades" title="Permalink to this headline">¶</a></h2>
<p>Las entidades pertenecientes a capas vectoriales pueden tomar estilos.
El estilo está determinado por una combinación de relleno, grosor, texto e imagen, los cuales son todos opcionales. Además, un estilo se puede aplicar a una capa, lo que marcará el estilo de todas las entidades contenidas, o a una entidad individual.</p>
<p>Un estilo se representa por la clase <code class="docutils literal"><span class="pre">ol.style.Style</span></code> que tiene propiedades para definir el relleno (<code class="docutils literal"><span class="pre">fill</span></code>),  grosor(<code class="docutils literal"><span class="pre">stroke</span></code>), texto (<code class="docutils literal"><span class="pre">text</span></code>) e imágen (<code class="docutils literal"><span class="pre">image</span></code>) a ser aplicadas. El siguiente ejemplo muestra los límites administrativos mundiales con un estilo que les da relleno verde y grosor.</p>
<a class="reference internal image-reference" href="../../_images/openlayers-styling.png"><img alt="../../_images/openlayers-styling.png" src="../../_images/openlayers-styling.png" style="width: 555.0px; height: 283.0px;" /></a>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">limitsLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span>
  <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">StaticVector</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;data/world_limits.json&#39;</span><span class="p">,</span>
    <span class="nx">format</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">format</span><span class="p">.</span><span class="nx">TopoJSON</span><span class="p">(),</span>
    <span class="nx">projection</span><span class="o">:</span> <span class="s1">&#39;EPSG:3857&#39;</span>
  <span class="p">}),</span>
  <span class="nx">style</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Style</span><span class="p">({</span>
    <span class="nx">fill</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Fill</span><span class="p">({</span>
      <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;rgba(55, 155, 55, 0.3)&#39;</span>
    <span class="p">}),</span>
    <span class="nx">stroke</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">({</span>
      <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;rgba(55, 155, 55, 0.8)&#39;</span><span class="p">,</span>
      <span class="nx">width</span><span class="o">:</span> <span class="mi">1</span>
    <span class="p">}),</span>
    <span class="nx">image</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Circle</span><span class="p">({</span>
      <span class="nx">radius</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
      <span class="nx">fill</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Fill</span><span class="p">({</span>
        <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;rgba(55, 155, 55, 0.5)&#39;</span><span class="p">,</span>
      <span class="p">})</span>
    <span class="p">})</span>
  <span class="p">})</span>
<span class="p">});</span>
</pre></div>
</div>
<p><strong>Ej. 7:</strong> Dando estilo a entidades</p>
<p>En el código, se ha cargado un archiv TopoJSON y se le ha asignado un estilo a través de la propiedad <code class="docutils literal"><span class="pre">style</span></code>.
Se han definido un relleno(<code class="docutils literal"><span class="pre">fill</span></code>) y grosor (<code class="docutils literal"><span class="pre">stroke</span></code>), necesarios para línea y polígonos y una imagen (<code class="docutils literal"><span class="pre">image</span></code>) (en este caso un círculo) usado para las entidades puntuales.</p>
</div>
<div class="section" id="trabajar-con-eventos">
<h2><a class="toc-backref" href="#id7">Trabajar con eventos</a><a class="headerlink" href="#trabajar-con-eventos" title="Permalink to this headline">¶</a></h2>
<p>La mayoría de los componentes, como el mapa, capas o controles disparan eventos para notificar cambios. Por ejemplo, se puede notificar cada vez que el ratón se mueve sobre el mapa, cuando una entidad se añade a una capa vectorial, etc.
Los Eventos s pueden registrar fácilmente en un objeto con el método <code class="docutils literal"><span class="pre">on()</span></code> y desregistrar con <code class="docutils literal"><span class="pre">un()</span></code>.</p>
<p>El siguiente código registra un evento en una instancia de mapa, y se notifica cada vez que el puntero se mueve. Con la función de respuesta se obtienen las coordenadas del puntero y se escriben en la consola del navegador en dos proyecciones diferentes.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pointermove&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">coord3857</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">coordinate</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">coord4326</span> <span class="o">=</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">proj</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">coord3857</span><span class="p">,</span> <span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="s1">&#39;EPSG:4326&#39;</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">coord3857</span><span class="p">,</span> <span class="nx">coord4326</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p><strong>Ej. 8:</strong> Escribe la posición del puntero.</p>
</div>
<div class="section" id="que-mas">
<h2><a class="toc-backref" href="#id8">¿Qué más?</a><a class="headerlink" href="#que-mas" title="Permalink to this headline">¶</a></h2>
<p>A veces, la forma más rápida de averiguar cómo funciona Openlayers es mirar los ejemplos y su código fuente. Se puede encontrar más información sobre OpenLayers3 aquí:</p>
<ul class="simple">
<li><a class="reference external" href="../../ol3/apidoc/">API Docs</a></li>
<li><a class="reference external" href="../../ol3/examples/">Examples</a></li>
<li>Página web de <a class="reference external" href="http://openlayers.org/">OpenLayers.org</a></li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>

  </body>
</html>