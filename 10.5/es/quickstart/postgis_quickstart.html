<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Guía de inicio rápido de PostGIS &mdash; OSGeo-Live 10.5
 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '10.5
',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="OSGeo-Live 10.5
 Documentation" href="../../index.html" />
    <link rel="up" title="Quickstarts" href="toc.html" />
    <link rel="next" title="pycsw Quickstart" href="pycsw_quickstart.html" />
    <link rel="prev" title="Guía de inicio rápido de pgRouting" href="pgrouting_quickstart.html" /> 
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>

  </head>
  <body role="document">
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../standards/standards.html">Standards</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>

    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="http://postgis.net" id="postgis-quickstart-es"><img alt="project logo" class="align-right" src="../../_images/logo-PostGIS.png" style="width: 26.1px; height: 38.4px;" /></a>
<div class="section" id="guia-de-inicio-rapido-de-postgis">
<h1><a class="toc-backref" href="#id1">Guía de inicio rápido de PostGIS</a><a class="headerlink" href="#guia-de-inicio-rapido-de-postgis" title="Permalink to this headline">¶</a></h1>
<p>PostGIS añade soporte espacial a la base de datos relacional PostgreSQL.
Le da a PostgreSQL la capacidad de almacenar, consultar y manipular datos espaciales. En este documento
se usa &#8216;PostgreSQL&#8217; para referirse a las funciones generales de la base de datos, y &#8216;PostGIS&#8217; para
hablar sobre las funcionalidades espaciales adicionales que le proporciona.</p>
<p>Esta Guía de inicio rápido describe cómo:</p>
<blockquote>
<div><ul class="simple">
<li>Crear y consultar una base de datos espacial desde la linea de comandos y desde el cliente gráfico <a class="reference internal" href="../overview/qgis_overview.html"><em>QGIS</em></a></li>
<li>Gestionar datos desde el cliente``pgAdmin``.</li>
</ul>
</div></blockquote>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#guia-de-inicio-rapido-de-postgis" id="id1">Guía de inicio rápido de PostGIS</a><ul>
<li><a class="reference internal" href="#arquitectura-cliente-servidor" id="id2">Arquitectura Cliente-servidor</a></li>
<li><a class="reference internal" href="#crear-una-base-de-datos-espacial" id="id3">Crear una base de datos espacial</a></li>
<li><a class="reference internal" href="#crear-una-tabla-espacial-para-usuarios-avanzados" id="id4">Crear una tabla espacial (para usuarios avanzados)</a></li>
<li><a class="reference internal" href="#consultas-simples" id="id5">Consultas simples</a></li>
<li><a class="reference internal" href="#consultas-espaciales" id="id6">Consultas espaciales</a></li>
<li><a class="reference internal" href="#generar-un-mapa" id="id7">Generar un mapa</a></li>
<li><a class="reference internal" href="#crear-una-tabla-espacial-de-forma-facil" id="id8">Crear una tabla espacial de forma fácil</a></li>
<li><a class="reference internal" href="#conozca-pgadmin-iii" id="id9">Conozca pgAdmin III</a></li>
<li><a class="reference internal" href="#ejecucion-de-consultas-sql-desde-pgadmin-iii" id="id10">Ejecución de consultas SQL desde pgAdmin III</a></li>
<li><a class="reference internal" href="#intentelo" id="id11">Inténtelo</a></li>
<li><a class="reference internal" href="#lo-proximo" id="id12">Lo próximo</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="arquitectura-cliente-servidor">
<h2><a class="toc-backref" href="#id2">Arquitectura Cliente-servidor</a><a class="headerlink" href="#arquitectura-cliente-servidor" title="Permalink to this headline">¶</a></h2>
<p>PostgreSQL, al igual que muchas otras bases de datos, trabaja como servidor en un sistema
cliente-servidor.
El cliente hace una petición al servidor y obtiene una respuesta. Trabaja de la misma forma que internet
- el navegador Web del usuario es el cliente y el servidor Web le envía la página Web que ha solicitado.
En el caso de PostgreSQL las peticiones se realizan en lenguaje SQL y la respuesta es generalmente
una tabla de datos procedente de la base de datos.</p>
<p>No hay nada que impida que el servidor esté en el mismo ordenador que el cliente, con lo cual, el usuario
puede usar PostgreSQL en la misma máquina. El cliente del usuario conecta con el servidor a través de
la conexión de red &#8216;loopback&#8217; interna, y no es visible a otros ordenadores a menos que el usuario lo
configure para que lo sea.</p>
</div>
<div class="section" id="crear-una-base-de-datos-espacial">
<h2><a class="toc-backref" href="#id3">Crear una base de datos espacial</a><a class="headerlink" href="#crear-una-base-de-datos-espacial" title="Permalink to this headline">¶</a></h2>
<p>Los clientes de línea de comandos se ejecutan desde un Emulador de Terminal. Este Terminal (actualmente LXTerminal) se arranca desde el menú  de aplicaciones, en la sección de Accessorios. Escribir:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">psql</span> <span class="o">-</span><span class="n">V</span>
</pre></div>
</div>
<p>y presionar enter para ver el número de versión de PostgreSQL.</p>
<p>Un único servidor PostgreSQL le permite organizar el trabajo en bases de datos separadas. Cada base de datos actúa como una entidad
independiente, con sus propias tablas, vistas, usuarios, etc. Cuando conecte a un servidor PostgreSQL debe indicar a qué base
de datos quiere acceder.</p>
<p>Puede obtener un listado de las bases de datos que hay disponibles en el servidor con el comando:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sb">``</span><span class="n">psql</span> <span class="o">-</span><span class="n">l</span><span class="sb">``</span>
</pre></div>
</div>
<p>Por defecto debería poder ver varias bases de datos creadas en la instalación. Creará una nueva base de datos al seguir esta guía.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">La lista usa un pager de unix estándar - pulse espacio para ir a la página siguiente, b para volver a la anterior, q para salir, h para acceder a la ayuda.</p>
</div>
<p>PostgreSQL le da un comando unix para crear bases de datos, <code class="docutils literal"><span class="pre">createdb</span></code>. Necesita crear una base de datos con las extensiones PostGIS,
por eso debe indicarle cuál es la plantilla para crear la base de datos. Llamaremos a la nueva base de datos <code class="docutils literal"><span class="pre">demo</span></code>. El comando es el siguiente:</p>
<div class="highlight-python"><div class="highlight"><pre>createdb demo
</pre></div>
</div>
<p>Generalmente puede acceder a la ayuda de las herramientas de línea de comandos tecleando &#8211;help</p>
<p>Si ejecuta en este momento <code class="docutils literal"><span class="pre">psql</span> <span class="pre">-l</span></code> , su base de datos <code class="docutils literal"><span class="pre">demo</span></code> debería aparecer en el listado.
No hemos añadido todavía la extensión PostGIS, pero en la siguiente sección aprenderá cómo hacerlo.</p>
<p>También puede crear bases de datos PostGIS usando el lenguaje SQL. En primer lugar deberá borrar la base de datos
que acaba de crear usando el comando <code class="docutils literal"><span class="pre">dropdb</span></code> . A continuación use el comando <code class="docutils literal"><span class="pre">psql</span></code> para obtener un intérprete
de comandos SQL:</p>
<div class="highlight-python"><div class="highlight"><pre>dropdb demo
psql -d postgres
</pre></div>
</div>
<p>De esta forma conectará con la base de datos <code class="docutils literal"><span class="pre">postgres</span></code> , que es una base de datos del sistema que todos los servidores deberían tener.
A continuación introduzca la instrucción SQL para crear una nueva
base de datos:</p>
<div class="highlight-python"><div class="highlight"><pre>postgres=# CREATE DATABASE demo;
</pre></div>
</div>
<p>Ahora cambie la conexión de la base de datos <code class="docutils literal"><span class="pre">postgres</span></code> a la nueva base de datos <code class="docutils literal"><span class="pre">demo</span></code> .
En el futuro puede conectarse directamente con el comando <code class="docutils literal"><span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">demo</span></code>, pero hay una forma ingeniosa de conectarse dentro de la línea de comandos <code class="docutils literal"><span class="pre">psql</span></code> :</p>
<div class="highlight-python"><div class="highlight"><pre>postgres=# \c demo
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Pulse Ctrl-C si el prompt de psql continúa apareciendo después de pulsar la tecla return. De esa forma limpiará su entrada y empezará otra vez. Es probable que el sistema esté esperando que introduzca un signo de cerrar comillas, punto y coma o algún otro signo.</p>
</div>
<p>Debería poder ver un mensaje informativo, y el prompt cambiará para mostrarle que ya está conectado a la base de
datos <code class="docutils literal"><span class="pre">demo</span></code>.</p>
<p>Lo siguiente, añada la extensión PostGIS:</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# create extension postgis;
</pre></div>
</div>
<p>Para comprobar que el proceso se ha realizado correctamente, teclee <code class="docutils literal"><span class="pre">\dt</span></code> para poder ver un listado de
las tablas que tiene la base de datos. Debería ver algo cómo esto:</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# \dt
             List of relations
 Schema |       Name       | Type  | Owner
--------+------------------+-------+-------
 public | spatial_ref_sys  | table | user
(1 rows)
</pre></div>
</div>
<p>PostGIS usa esa tabla. La tabla <code class="docutils literal"><span class="pre">spatial_ref_sys</span></code> almacena información de sistemas de referencia espaciales
válidos, y puede usar algunas órdenes de SQL para poder ver su contenido:</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# SELECT srid,auth_name,proj4text FROM spatial_ref_sys LIMIT 10;

 srid | auth_name |          proj4text
------+-----------+--------------------------------------
 3819 | EPSG      | +proj=longlat +ellps=bessel +towgs...
 3821 | EPSG      | +proj=longlat +ellps=aust_SA +no_d...
 3824 | EPSG      | +proj=longlat +ellps=GRS80 +towgs8...
 3889 | EPSG      | +proj=longlat +ellps=GRS80 +towgs8...
 3906 | EPSG      | +proj=longlat +ellps=bessel +no_de...
 4001 | EPSG      | +proj=longlat +ellps=airy +no_defs...
 4002 | EPSG      | +proj=longlat +a=6377340.189 +b=63...
 4003 | EPSG      | +proj=longlat +ellps=aust_SA +no_d...
 4004 | EPSG      | +proj=longlat +ellps=bessel +no_de...
 4005 | EPSG      | +proj=longlat +a=6377492.018 +b=63...
(10 rows)
</pre></div>
</div>
<p>Esta tabla confirma que tiene una base de datos con capacidad espacial. La función de la tabla <code class="docutils literal"><span class="pre">geometry_columns</span></code> es
decirle a PostGIS qué tablas tienen carácter espacial. Este es el siguiente paso.</p>
</div>
<div class="section" id="crear-una-tabla-espacial-para-usuarios-avanzados">
<h2><a class="toc-backref" href="#id4">Crear una tabla espacial (para usuarios avanzados)</a><a class="headerlink" href="#crear-una-tabla-espacial-para-usuarios-avanzados" title="Permalink to this headline">¶</a></h2>
<p>Ahora que tiene una base de datos espacial puede crear tablas espaciales.</p>
<p>Primero cree una tabla de base de datos ordinaria para almacenar algunos datos de ciudades. Esta tabla debe
tener 2 campos - uno para el ID numérico y otro para el nombre de la ciudad:</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# CREATE TABLE cities ( id int4  primary key, name varchar(50), geom geometry(POINT,4326) );
</pre></div>
</div>
<p>Por convención la columna de geometría se suele llamar <code class="docutils literal"><span class="pre">geom</span></code> (la convención en versiones previas de PostGIS era <code class="docutils literal"><span class="pre">the_geom</span></code>). Esto le dice a PostGIS que tipo de geometría tiene cada registro (puntos, líneas, polígonos,etc.), cuántas dimensiones (en este caso dos, si tuviera 3 o y dimensiones, usaríamos POINTZ, POINTM, o POINTZM), y el sistema de referencia espacial. En este caso la localización de las ciudades se marcará usando coordenadas del sistema de referencia EPSG:4326.</p>
<p>Si comprueba en este momento la tabla cities debería ver la nueva columna y que la tabla no tiene actualmente ninguna fila.</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# SELECT * from cities;
 id | name | geom
----+------+----------
(0 rows)
</pre></div>
</div>
<p>Para añadir filas a la tabla se usan algunas sentencias SQL. Para introducir la geometría dentro de la columna de
geometrías use la función de PostGIS <code class="docutils literal"><span class="pre">ST_GeomFromText</span></code> , que convierte las coordenadas y el id del
sistema de referencia espacial, introducidas en formato texto:</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# INSERT INTO cities (id, geom, name) VALUES (1,ST_GeomFromText(&#39;POINT(-0.1257 51.508)&#39;,4326),&#39;London, England&#39;);
demo=# INSERT INTO cities (id, geom, name) VALUES (2,ST_GeomFromText(&#39;POINT(-81.233 42.983)&#39;,4326),&#39;London, Ontario&#39;);
demo=# INSERT INTO cities (id, geom, name) VALUES (3,ST_GeomFromText(&#39;POINT(27.91162491 -33.01529)&#39;,4326),&#39;East London,SA&#39;);
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Use las flechas del teclado para reutilizar y editar sentencias en la línea de comandos.</p>
</div>
<p>Como puede ver, este paso llega a ser tedioso rápidamente. Afortunadamente hay formas mucho más fáciles de
introducir datos dentro de las tablas PostGIS. Pero ahora hay tres ciudades en su base de datos y ya puede trabajar con
esos datos.</p>
</div>
<div class="section" id="consultas-simples">
<h2><a class="toc-backref" href="#id5">Consultas simples</a><a class="headerlink" href="#consultas-simples" title="Permalink to this headline">¶</a></h2>
<p>Para seleccionar datos de una tabla PostGIS se pueden aplicar todas las operaciones SQL comunes.</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# SELECT * FROM cities;
 id |      name       |                      geom
----+-----------------+----------------------------------------------------
  1 | London, England | 0101000020E6100000BBB88D06F016C0BF1B2FDD2406C14940
  2 | London, Ontario | 0101000020E6100000F4FDD478E94E54C0E7FBA9F1D27D4540
  3 | East London,SA  | 0101000020E610000040AB064060E93B4059FAD005F58140C0
(3 rows)
</pre></div>
</div>
<p>De esta forma obtiene una versión hexadecimal del campo geometría difícil de interpretar.</p>
<p>Si desea volver a echar un vistazo a su geometría en formato WKT, puede usar las funciones ST_AsText(geom) o ST_AsEwkt(geom).
También puede usar ST_X(geom), ST_Y(geom) para obtener el valor numérico de las coordenadas:</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# SELECT id, ST_AsText(geom), ST_AsEwkt(geom), ST_X(geom), ST_Y(geom) FROM cities;
 id |          st_astext           |               st_asewkt                |    st_x     |   st_y
----+------------------------------+----------------------------------------+-------------+-----------
  1 | POINT(-0.1257 51.508)        | SRID=4326;POINT(-0.1257 51.508)        |     -0.1257 |    51.508
  2 | POINT(-81.233 42.983)        | SRID=4326;POINT(-81.233 42.983)        |     -81.233 |    42.983
  3 | POINT(27.91162491 -33.01529) | SRID=4326;POINT(27.91162491 -33.01529) | 27.91162491 | -33.01529
(3 rows)
</pre></div>
</div>
</div>
<div class="section" id="consultas-espaciales">
<h2><a class="toc-backref" href="#id6">Consultas espaciales</a><a class="headerlink" href="#consultas-espaciales" title="Permalink to this headline">¶</a></h2>
<p>PostGIS añade a PostgreSQL muchas funciones con funcionalidad espacial.
Una de ellas, y que ya ha visto, es ST_GeomFromText que convierte WKT a geometría.
La mayor parte de las funciones empiezan con ST (para tipo espacial). Hay un listado
de ellas en una sección de la documentación de PostGIS.  A continuación,
usará una para responder una cuestión práctica - ¿Qué distancia en metros hay entre estas tres ciudades llamadas Londres, unas de otras, si asumimos que
la tierra es esférica?</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# SELECT p1.name,p2.name,ST_Distance_Sphere(p1.geom,p2.geom) FROM cities AS p1, cities as p2 WHERE p1.id &gt; p2.id;
      name       |      name       | st_distance_sphere
-----------------+-----------------+--------------------
 London, Ontario | London, England |   5875766.85191657
 East London,SA  | London, England |   9789646.96784908
 East London,SA  | London, Ontario |   13892160.9525778
 (3 rows)
</pre></div>
</div>
<p>Con lo cual obtiene la distancia, en metros, entre cada par
de ciudades. Tenga en cuenta que la parte &#8216;WHERE&#8217; de la consulta es
lo que evita que obtenga la distancia entre una ciudad y sí misma
(que en todos los casos será cero) o las distancias inversas entre las
ciudades que aparecen en la tabla de arriba (la distancia entre Londres de Inglaterra y Londres de Ontario es la misma que de Londres de Ontario a Londres de Inglaterra). Intente hacer la misma consulta sin incluir la parte del &#8216;WHERE&#8217; y mire el resultado que obtiene.</p>
<p>También puede medir la distancia empleando un elipsoide mediante una función diferente,
especificando el nombre del elipsoide, el semieje mayor y el parámetro del inverso del aplanamiento:</p>
<div class="highlight-python"><div class="highlight"><pre>demo=# SELECT p1.name,p2.name,ST_Distance_Spheroid(
        p1.geom,p2.geom, &#39;SPHEROID[&quot;GRS_1980&quot;,6378137,298.257222]&#39;
        )
        FROM cities AS p1, cities AS p2 WHERE p1.id &gt; p2.id;
      name       |      name       | st_distance_spheroid
-----------------+-----------------+----------------------
 London, Ontario | London, England |     5892413.63776489
 East London,SA  | London, England |     9756842.65711931
 East London,SA  | London, Ontario |     13884149.4140698
(3 rows)
</pre></div>
</div>
<p>Para cerrar la línea de comandos de PostgreSQL, teclee:</p>
<div class="highlight-python"><div class="highlight"><pre>\q
</pre></div>
</div>
<p>Ahora estará de vuelta en la consola del sistema:</p>
<p><a class="reference external" href="mailto:user&#37;&#52;&#48;osgeolive">user<span>&#64;</span>osgeolive</a>:~$</p>
</div>
<div class="section" id="generar-un-mapa">
<h2><a class="toc-backref" href="#id7">Generar un mapa</a><a class="headerlink" href="#generar-un-mapa" title="Permalink to this headline">¶</a></h2>
<p>Para producir un mapa a partir de datos PostGIS, necesita un cliente que pueda obtener los datos. La mayoría
de los programas SIG de escritorio de código abierto pueden hacerlo - por ejemplo, Quantum GIS, gvSIG o uDig.
A continuación verá cómo generar un mapa con Quantum GIS.</p>
<p>Inicie QGIS y elija <code class="docutils literal"><span class="pre">Añadir</span> <span class="pre">capa</span> <span class="pre">PostGIS</span></code> del menú Capa. Los parámetros para conectar con los datos OpenStreetMap en PostGis ya están definidos en el menú desplegable de Conexiones. Puede definir nuevas conexiones a servidores y guardar la configuración para recuperarla fácilmente. Clic en el menú desplegable de Conexiones y elija Natural Earth, o sólo presione <code class="docutils literal"><span class="pre">Conectar</span></code> para continuar:</p>
<a class="reference internal image-reference" href="../../_images/postgis_addlayers.png"><img alt="Connect to Natural Earth" class="align-center" src="../../_images/postgis_addlayers.png" style="width: 300.0px; height: 252.0px;" /></a>
<p>Obtendrá una lista de las tablas espaciales de la base de datos.</p>
<a class="reference internal image-reference" href="../../_images/postgis_listtables.png"><img alt="Natural Earth Layers" class="align-center" src="../../_images/postgis_listtables.png" style="width: 300.0px; height: 252.0px;" /></a>
<p>Elija la tabla lagos y pinche <code class="docutils literal"><span class="pre">Añadir</span></code> (no <code class="docutils literal"><span class="pre">Cargar</span></code> - que guarda las consultas). Esta capa se debería cargar en QGIS:</p>
<a class="reference internal image-reference" href="../../_images/postgis_lakesmap.png"><img alt="My First PostGIS layer" class="align-center" src="../../_images/postgis_lakesmap.png" style="width: 512.0px; height: 371.5px;" /></a>
<p>Debería poder ver un mapa de los lagos. Como QGIS no sabe que son lagos, es posible que no los pinte
con color azul. Use la documentación de QGIS para averiguar cómo cambiarlo. A continuación, haga zoom
a un famoso grupo de lagos de Canadá.</p>
</div>
<div class="section" id="crear-una-tabla-espacial-de-forma-facil">
<h2><a class="toc-backref" href="#id8">Crear una tabla espacial de forma fácil</a><a class="headerlink" href="#crear-una-tabla-espacial-de-forma-facil" title="Permalink to this headline">¶</a></h2>
<p>La mayor parte de las herramientas de escritorio de OSgeo tienen funciones para importar datos espaciales desde archivos,
como por ejemplo shapefiles, dentro de bases de datos PostGIS. También usaremos QGIS para mostrar cómo se hace.</p>
<p>Se pueden importar shapefiles a QGIS a través del práctico Administrador de BBDD de QGIS. El administrador se encuentra en el menú <code class="docutils literal"><span class="pre">Bases</span> <span class="pre">de</span> <span class="pre">datos</span> <span class="pre">-&gt;</span> <span class="pre">Administrador</span> <span class="pre">de</span> <span class="pre">BBDD</span> <span class="pre">-&gt;</span> <span class="pre">Administrador</span> <span class="pre">de</span> <span class="pre">BBDD</span></code>.</p>
<p>Entonces el gestor usará las preferencias que usted ha definido previamente para conectar a la base de datos Natural Earth.
Si le pide la contraseña déjela en blanco. Verá la ventana principal del gestor. A la izquierda se pueden seleccionar tablas de la base de datos y usar las pestañas de la derecha para ver información sobre las mismas. La pestaña de Vista Preliminr mostrará un pequeño mapa.</p>
<a class="reference internal image-reference" href="../../_images/postgis_managerpreview.png"><img alt="QGIS Manager Preview" class="align-center" src="../../_images/postgis_managerpreview.png" style="width: 407.0px; height: 285.5px;" /></a>
<p>Ahora use el PostGIS manager para importar un shapefile dentro de la base de datos. Usará los datos del
síndrome de muerte súbita infantil (SIDS, por sus siglas en inglés) de Carolina del Norte  que están
incluidos en uno de los complementos del paquete estadístico R.</p>
<p>Dentro del menú <code class="docutils literal"><span class="pre">Tabla</span></code> elija la opción <code class="docutils literal"><span class="pre">Importar</span> <span class="pre">capa/archivo</span></code>. Pinche el botón <code class="docutils literal"><span class="pre">...</span></code> y busque el shapefile <code class="docutils literal"><span class="pre">sids.shp</span></code> en el paquete <code class="docutils literal"><span class="pre">maptools</span></code> de R (que se encuentra en /usr/lib/R/site-library/maptools/shapes/):</p>
<dl class="docutils">
<dt>. image:: ../../images/screenshots/1024x768/postgis_browsedata.png</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">scale:</th><td class="field-body">50 %</td>
</tr>
<tr class="field-even field"><th class="field-name">alt:</th><td class="field-body">Find the shapefile</td>
</tr>
<tr class="field-odd field"><th class="field-name">align:</th><td class="field-body">center</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>No cambie nada más y pulse <code class="docutils literal"><span class="pre">Aceptar</span></code>.</p>
<a class="reference internal image-reference" href="../../_images/postgis_importsids.png"><img alt="Import a shapefile" class="align-center" src="../../_images/postgis_importsids.png" style="width: 217.0px; height: 320.0px;" /></a>
<p>Deje el Sistema de referencia de coordenadas por defecto (WGS 84 EPSG:4326) y presione <code class="docutils literal"><span class="pre">Aceptar</span></code>. El shapefile se debería importar a PostGIS sin errores. Cierre el PostGIS Manager y vuelva a la ventana principal de QGIS.</p>
<p>A continuación cargue los datos de SIDS en el mapa usando la opción &#8216;Añadir capas PostGIS&#8217;.
Cambiando de orden algunas capas y coloreando un poco debería ser capaz de obtener un mapa de coropletas del recuento
de síndromes de muerte súbita infantil en Carolina del Norte:</p>
<a class="reference internal image-reference" href="../../_images/postgis_sidsmap.png"><img alt="SIDS data mapped" class="align-center" src="../../_images/postgis_sidsmap.png" style="width: 512.0px; height: 371.5px;" /></a>
</div>
<div class="section" id="conozca-pgadmin-iii">
<h2><a class="toc-backref" href="#id9">Conozca pgAdmin III</a><a class="headerlink" href="#conozca-pgadmin-iii" title="Permalink to this headline">¶</a></h2>
<p>Puede usar el cliente gráfico de bases de datos <code class="docutils literal"><span class="pre">pgAdmin</span> <span class="pre">III</span></code> para consultar y modificar sus bases
de datos no espaciales. Este es el cliente oficial de PostgreSQL, y permite que use el lenguaje SQL para manipular sus tablas de datos. Se puede encontrar y ejecutar pgAdmin III desde la carpeta de Databases en el escritorio del OSGeo Live.</p>
<a class="reference internal image-reference" href="../../_images/postgis_pgadmin_main_window.png"><img alt="pgAdmin III" class="align-center" src="../../_images/postgis_pgadmin_main_window.png" style="width: 511.0px; height: 370.5px;" /></a>
<p>Aquí, tiene a opción de crear una nueva conexión a un servidor PostgreSQL o conectar a un servidor existente. En este caso, vamos a conectar al servidor <code class="docutils literal"><span class="pre">local</span></code> predefinido.</p>
<p>Tras establecerse la conexión, podrá ver el listado de bases de datos ya existentes en el sistema.</p>
<a class="reference internal image-reference" href="../../_images/postgis_adminscreen02.png"><img alt="pgAdmin III" class="align-center" src="../../_images/postgis_adminscreen02.png" style="width: 512.5px; height: 371.0px;" /></a>
<p>La cruz roja en la imagen de la mayoría de las bases de datos, indica que no se ha conectado todavía a ninguna de ellas (en este momento está conectado sólo a la base de datos por defecto <code class="docutils literal"><span class="pre">postgres</span></code>).
En este momento, sólo puede visualizar las bases de datos disponibles en el sistema. Se puede conectar, haciendo doble clic sobre el nombre de  una base de datos. Haremos esto con la base de datos natural_earth2.</p>
<p>Se puede ver como la cruz roja desaparece y aparece un signo &#8220;+&#8221; a la izquierda. Presionandola se desplegará un arbol mostrando el contenido de la base de datos. Navegar hasta el elemento <code class="docutils literal"><span class="pre">schemas</span></code> y expandirlo y tras él, el esquema <code class="docutils literal"><span class="pre">public</span></code>. Ahora, expandiendo el elemento <code class="docutils literal"><span class="pre">Tables</span></code>, puede ver todas las tablas contenidas en este esquema.</p>
<a class="reference internal image-reference" href="../../_images/postgis_adminscreen14.png"><img alt="pgAdmin III" class="align-center" src="../../_images/postgis_adminscreen14.png" style="width: 512.0px; height: 371.5px;" /></a>
</div>
<div class="section" id="ejecucion-de-consultas-sql-desde-pgadmin-iii">
<h2><a class="toc-backref" href="#id10">Ejecución de consultas SQL desde pgAdmin III</a><a class="headerlink" href="#ejecucion-de-consultas-sql-desde-pgadmin-iii" title="Permalink to this headline">¶</a></h2>
<p>pgAdmin III ofrece la capacidad de realizar consulata a una base de datos relacional.</p>
<p>Para desarrollar una consulta en la base de datos, hay que presionar el botón <cite>SQL`</cite> en la barra de herramientas principal (el que tiene una lupa amarilla).</p>
<p>Vamos a averiguar la tasa de SIDS respecto a los nacimientos para el año  1974 en cada ciudad.
Además, vamos a ordenar el resultado en función de la tasa calculada. Para hacerlo, tenemos que ejecutar la siguiente consulta (copiela en el editr de texto de la ventana de SQL):</p>
<div class="highlight-python"><div class="highlight"><pre>select name, 1000*sid74/bir74 as rate from sids order by rate;
</pre></div>
</div>
<p>Después, debe presionar el botón con una flecha verde apuntando a la derecha (<em>Execute query</em>, ejecutar consulta).</p>
<a class="reference internal image-reference" href="../../_images/postgis_adminscreen24.png"><img alt="pgAdmin III" class="align-center" src="../../_images/postgis_adminscreen24.png" style="width: 512.0px; height: 371.5px;" /></a>
</div>
<div class="section" id="intentelo">
<h2><a class="toc-backref" href="#id11">Inténtelo</a><a class="headerlink" href="#intentelo" title="Permalink to this headline">¶</a></h2>
<p>A continuación se presentan algunos desafíos adicionales para que los intente llevar a cabo:</p>
<p>#. Pruebe más funciones espaciales como <code class="docutils literal"><span class="pre">st_buffer(geom)</span></code>, <code class="docutils literal"><span class="pre">st_transform(geom,25831)</span></code>, <code class="docutils literal"><span class="pre">x(geom)</span></code> .
Puede consultar documentación completa en <a class="reference external" href="http://postgis.net/documentation/">http://postgis.net/documentation/</a></p>
<ol class="arabic simple">
<li>Exporte sus tablas a shapefiles con <code class="docutils literal"><span class="pre">pgsql2shp</span></code> desde la línea de comandos.</li>
<li>Intente usar <code class="docutils literal"><span class="pre">ogr2ogr</span></code> desde línea de comandos para importar/exportar datos a su base de datos.</li>
</ol>
</div>
<div class="section" id="lo-proximo">
<h2><a class="toc-backref" href="#id12">Lo próximo</a><a class="headerlink" href="#lo-proximo" title="Permalink to this headline">¶</a></h2>
<p>Éste es solamente el primer paso en el proceso de usar PostGIS. Hay muchas más funcionalidades que puede probar.</p>
<p>Página Web del Proyecto PostGIS</p>
<p><a class="reference external" href="http://postgis.net">http://postgis.net</a></p>
<p>Documentación de PostGIS</p>
<p><a class="reference external" href="http://postgis.net/documentation/">http://postgis.net/documentation/</a></p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>

  </body>
</html>