

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Guida Rapida a R &mdash; OSGeo-Live 6.5
 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.5
',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="OSGeo-Live 6.5
 Documentation" href="../../index.html" /> 
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>

  </head>
  <body>
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../standards/standards.html">Standards</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
            </ul>
        </div>
    </div>

    <div class="related">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <a class="reference internal image-reference" href="../../_images/logo-R.jpg"><img alt="project logo" class="align-right" src="../../_images/logo-R.jpg" style="width: 60.0px; height: 45.6px;" /></a>
<div class="section" id="guida-rapida-a-r">
<h1>Guida Rapida a R<a class="headerlink" href="#guida-rapida-a-r" title="Permalink to this headline">¶</a></h1>
<p>R è un ambiente software libero per il calcolo statistico e la grafica.</p>
<p>Questa rapida introduzione ad R descrive come:</p>
<blockquote>
<div><ul class="simple">
<li>utilizzare R per semplici operazioni aritmetiche</li>
<li>caricare dati e creare una mappa da un file in formato shape</li>
<li>operare una trasformazione di coordinate</li>
<li>plottare punti su una mappa</li>
</ul>
</div></blockquote>
<div class="section" id="avviare-r">
<h2>Avviare R<a class="headerlink" href="#avviare-r" title="Permalink to this headline">¶</a></h2>
<p>Opzioni disponibili:</p>
<blockquote>
<div><ul class="simple">
<li>Scegliere <tt class="docutils literal"><span class="pre">R</span> <span class="pre">Statistics</span></tt> dalla sezione Spatial Tools del menu - una finestra
terminale apparirà con R già avviato.</li>
<li>Digitare <tt class="docutils literal"><span class="pre">R</span></tt> al prompt di una riga di comando shell. R verrà avviato nel terminale
stesso.</li>
</ul>
</div></blockquote>
<p>Non temete la riga di comando - è uno strumento molto potente. Utilizzare le frecce su
e giù per richiamare i comandi già utilizzati e fare correzioni è di grande aiuto. Nel
caso il programma si blocchi digitando CTRL-C dovreste tornare al prompt della shell.</p>
</div>
<div class="section" id="terminare-r">
<h2>Terminare R<a class="headerlink" href="#terminare-r" title="Permalink to this headline">¶</a></h2>
<p>Quasi tutto in R è una funzione, inclusi i comandi per terminare R stesso. Digitare
<tt class="docutils literal"><span class="pre">q()</span></tt> e premere il tasto INVIO. Digitando solo <tt class="docutils literal"><span class="pre">q</span></tt> (senza le parentesi) verrà mostrato
il codice sorgente per la funzione <tt class="docutils literal"><span class="pre">q</span></tt>.</p>
<p>R chiederà se si vuole salvare l&#8217;ambiente di lavoro come un file immagine dati di R.
Quando R verrà avviato nuovamente da una cartella contenente un file <tt class="docutils literal"><span class="pre">.RData</span></tt> verranno
ripristinati tutti i dati precedentemente salvati nel file immagine.</p>
</div>
<div class="section" id="cominciare-ad-utilizzare-r-beginning-r">
<h2>Cominciare ad utilizzare R (Beginning R)<a class="headerlink" href="#cominciare-ad-utilizzare-r-beginning-r" title="Permalink to this headline">¶</a></h2>
<p>R è essenzialmente un programma a linea di comando (CLI, command line interface) sebbene
siano disponibili interfacce utente grafiche (GUI, grafical user interface).
Digitando una riga di codice al prompt e premendo INVIO, l&#8217;interprete di R valuta il comando
e stampa il risultato.</p>
<p>Si può cominciare con semplici operazioni aritmetiche:</p>
<div class="highlight-python"><pre>&gt; 3*2
[1] 6

&gt; 1 + 2 * 3 / 4
[1] 2.5

&gt; sqrt(2) #square root -&gt; radice quadrata
[1] 1.414214

&gt; pi * exp(-1)
[1] 1.155727</pre>
</div>
<p>E cosi via. Un&#8217;intera gamma di funzioni airtmetiche, trigonometriche e statistiche sono
già installate (built in) e molte altre migliaia sono disponibili all&#8217;interno di pacchetti
localizzati nell&#8217;archivio on-line <cite>CRAN &lt;http://cran.r-project.org/&gt;</cite>.</p>
<p>Il prompt principale in R è <tt class="docutils literal"><span class="pre">&gt;</span></tt>, sebbene esista anche il prompt di continuazione <tt class="docutils literal"><span class="pre">+</span></tt>, che
apapre quando R si aspetta che ulteriori input siano necessari per rendere valida un espressione.
Quest&#8217;ultimo compare nel caso in cui ci si dimentichi di chiudere le parentesi.</p>
<div class="highlight-python"><pre>&gt; sqrt(
+ 2
+ )
[1] 1.414214</pre>
</div>
</div>
<div class="section" id="costruire-dati-building-data">
<h2>Costruire Dati (Building Data)<a class="headerlink" href="#costruire-dati-building-data" title="Permalink to this headline">¶</a></h2>
<p>Qualcuno potrebbe chiedersi cosa voglia dire quel misterioso &#8216;uno&#8217; racchiuso tra parentesi
quadre nell&#8217;output. Sta dicendo che il risultato consiste di un solo numero. R può immagazinare
&#8220;cose&#8221; vettori mono-dimensionali, matrici bi-dimensionali e array multi-dimensionali. Ci sono
molte funzioni che possono generare queste cose. Di seguito una semplice sequenza:</p>
<div class="highlight-python"><pre>&gt; seq(1, 5, len=10)
[1] 1.000000 1.444444 1.888889 2.333333 2.777778 3.222222 3.666667 4.111111
[9] 4.555556 5.000000</pre>
</div>
<p>Ora si può capire come il <tt class="docutils literal"><span class="pre">[9]</span></tt> stia dicendo che 4.555 è il nono valore del vettore.</p>
<p>Quando si costruisce una matrice verranno mostrate etichette di righe e colonne:</p>
<div class="highlight-python"><pre>&gt; m=matrix(1:12, 3, 4)
&gt; m
     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</pre>
</div>
<p>Gli elementi delle matrici possono essere estratti utilizzando le parentesi quadre, con gli
indici di righe e colonne separate da virgole. Lasciando uno spazio bianco al posto di un indice
restituirà l&#8217;intera riga (o colonna) come vettore. Per ottenere più righe o colonne come una
matrice più piccola utilizzare gli indici di un vettore:</p>
<div class="highlight-python"><pre>&gt; m[2,4]
[1] 11

&gt; m[2,]
[1]  2  5  8 11

&gt; m[,3:4]
     [,1] [,2]
[1,]    7   10
[2,]    8   11
[3,]    9   12</pre>
</div>
<p>I &#8216;data frames&#8217; sono strutture di dati che rispecchiano le strutture i tipi di strutture
ritrovabili negli RDBMS (relational data base management system) come Postgres o MySQL. Ogni
riga può essere pensata come un &#8216;record&#8217; mentre le colonne cosituiscono i da campi di un
database. Come in un data base ogni campo deve essere dello stesso tipo per ogni record.</p>
<p>Per molti versi funzionano come le matrici. In aggiunta è possibile richiamare e settare le
colonne per nome utilizzando la notazione $:</p>
<div class="highlight-python"><pre>&gt; d = data.frame(x=1:10, y=1:10, z=runif(10)) # z è composto da 10 numeri random
&gt; d
        x  y          z
    1   1  1 0.44128080
    2   2  2 0.09394331
    3   3  3 0.51097462
    4   4  4 0.82683828
    5   5  5 0.21826740
    6   6  6 0.65600533
    7   7  7 0.59798278
    8   8  8 0.19003625
    9   9  9 0.24004866
    10 10 10 0.35972749

&gt; d$z
 [1] 0.44128080 0.09394331 0.51097462 0.82683828 0.21826740 0.65600533
 [7] 0.59798278 0.19003625 0.24004866 0.35972749

&gt; d$big = d$z &gt; 0.6  # d$big is now a boolean true/false value
&gt; d[1:5,]
  x y          z   big
1 1 1 0.44128080 FALSE
2 2 2 0.09394331 FALSE
3 3 3 0.51097462 FALSE
4 4 4 0.82683828  TRUE
5 5 5 0.21826740 FALSE

&gt; d$name = letters[1:10] # create a new field of characters
&gt; d[1:5,]
  x y          z   big name
  1 1 1 0.44128080 FALSE    a
  2 2 2 0.09394331 FALSE    b
  3 3 3 0.51097462 FALSE    c
  4 4 4 0.82683828  TRUE    d
  5 5 5 0.21826740 FALSE    e</pre>
</div>
</div>
<div class="section" id="caricare-dati-da-un-mappa">
<h2>Caricare dati da un mappa<a class="headerlink" href="#caricare-dati-da-un-mappa" title="Permalink to this headline">¶</a></h2>
<p>Esistono molti pacchetti per la manipolazione e le statistiche di dati spaziali. Alcuni
sono inclusi qui altri possono essere scaricati da CRAN.</p>
<p>Qui mostreremo come caricare due shapefiles - i confini nazionali e le località popolate dai
dati di Natural Earth. Usiamo due pacchetti installati (add-on) per ottenere le funzioalità spaziali:</p>
<div class="highlight-python"><pre>&gt; library(sp)
&gt; library(maptools)

&gt; countries = readShapeSpatial("/usr/local/share/data/natural_earth/ne_10m_admin_0_countries.shp")
&gt; places = readShapeSpatial("/usr/local/share/data/natural_earth/ne_10m_populated_places.shp")
&gt; plot(countries)</pre>
</div>
<p>Questo ci dà una semplice mappa del mondo:</p>
<img alt="../../_images/r_plot16.png" src="../../_images/r_plot16.png" />
<p>Quando un dataset OGR viene letto in R in questo modo otteniamo un oggetto che per molti aspetti
si comporta come un data frame. Possiamo utilizzare il campo <tt class="docutils literal"><span class="pre">ADMIN</span></tt> per fare un subset dei dati
del mondo e ottenere, ad esempio, la Gran Bretagna (UK, United Kingdom):</p>
<div class="highlight-python"><pre>&gt; uk = countries[countries$ADMIN == "United Kingdom",]
&gt; plot(uk); axis(1); axis(2)</pre>
</div>
<img alt="../../_images/r_plot26.png" src="../../_images/r_plot26.png" />
<p>Questa immagine può apparire un po&#8217; schiacciata a chiunque viva in Gran Bretagna poichè siamo
abituati con sistemi di coordinate centrate alle nostre latitudini. Attualmente l&#8217;oggetto non
ha un sistema di coordinate assegnato - possiamo verificare ciò con qualche funzione:</p>
<div class="highlight-python"><pre>&gt; proj4string(uk)
[1] NA</pre>
</div>
<p><tt class="docutils literal"><span class="pre">NA</span></tt> è un indicatore per i dati mancanti. Abbiamo bisogno di assegnare un CRS (sistema di riferimento
di coordinate) all&#8217;oggetto prima di poter operare una trasformazione con la funzione spTransform del
pacchetto rgdal. Trasformiamo in EPSG:27700 che rappresenta l&#8217; Ordnance Survey of Great Britain grid system:</p>
<div class="highlight-python"><pre>&gt; proj4string(uk) = CRS("+init=epsg:4326")
&gt; library(rgdal)
&gt; ukos = spTransform(uk, CRS("+init=epsg:27700"))
&gt; proj4string(ukos)
[1] " +init=epsg:27700 +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs
+towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894"

&gt; plot(ukos); axis(1); axis(2)</pre>
</div>
<p>Questo comando plotta la mappa di base dei dati trasformati. Ora vogliamo aggiungere qualche punto
dal data set dei posti popolati (populated places). Ancora una volta operiamo un estrazione di un
sottoinsieme (subset) di dati che ci interessano e li trasformiamo nel sistema di coordinate dell&#8217;Ordnance
Survey Grid Reference:</p>
<div class="highlight-python"><pre>&gt; ukpop = places[places$ADM0NAME == "United Kingdom",]
&gt; proj4string(ukpop) = CRS("+init=epsg:4326")
&gt; ukpop = spTransform(ukpop, CRS("+init=epsg:27700"))</pre>
</div>
<p>Aggiungiamo questi punti alla mappa di base, scalando la loro dimensione in base alla radice quadrata
della popolazione (in modo da rendere l&#8217;area del simbolo proporzionale alla popolazione), settiamo i
colori (col=) in rosso e i caratteri (pch=) come punti pieni:</p>
<div class="highlight-python"><pre>&gt; points(ukpop, cex=sqrt(ukpop$POP_MAX/1000000), col="red", pch=19)
&gt; title("UK Population centre sizes")</pre>
</div>
<p>e la nostra immagine finale appare:</p>
<img alt="../../_images/r_plot36.png" src="../../_images/r_plot36.png" />
</div>
<div class="section" id="vignettes">
<h2>Vignettes<a class="headerlink" href="#vignettes" title="Permalink to this headline">¶</a></h2>
<p>Nel passato la documentazione per R consisteva in pagine di aiuto scritte concisamente per ogni funzione.
Oggi, gli autori dei pacchetti sono incoraggiati a scrivere &#8216;vignette come introduzione intuitiva al
pacchetto. Digitando solo la funzione <tt class="docutils literal"><span class="pre">vignette()</span></tt>  senza nessun argomento si ottiene una lista di
quelle vignette presenti sul proprio sistema. Prova <tt class="docutils literal"><span class="pre">vignette(&quot;intro_sp&quot;)</span></tt> per una introduzione poco tecnica
ai pacchetti che utilizzano dati spaziali presenti in R, oppure <tt class="docutils literal"><span class="pre">vignette(&quot;shapefiles&quot;)</span></tt> per una spiegazione
di come utilizzare shapefiles in R. <tt class="docutils literal"><span class="pre">vignette(&quot;gstat&quot;)</span></tt> fornisce un tutorial per l&#8217;uso del pacchetto per
l&#8217;interpolazione spaziale incluso il Kriging.</p>
</div>
<div class="section" id="approfondimenti">
<h2>Approfondimenti<a class="headerlink" href="#approfondimenti" title="Permalink to this headline">¶</a></h2>
<p>Per informazioni generali circa R, si può consultare il manuale officiale  <cite>Introduzione a R &lt;http://cran.r-project.org/doc/manuals/R-intro.html&gt;</cite> o qualsiasi altra documentazione presente sul sito
principale <cite>R Project &lt;http://www.r-project.org/&gt;</cite>.</p>
<p>Per maggiori informazioni sugli aspetti spaziali di R, il miglior posto per iniziare è probabilmente
<cite>R Spatial Task View &lt;http://cran.r-project.org/web/views/Spatial.html&gt;</cite>.</p>
<p>Potrebbe anche essere interessante dare un&#8217;occhiata alla pagina <cite>R-Spatial &lt;http://r-spatial.sourceforge.net/&gt;</cite>
su sourceforge per qualche link aggiuntivo che include informazioni sulla mailing list R-sig-Geo.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
    </div>

<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>

  </body>
</html>