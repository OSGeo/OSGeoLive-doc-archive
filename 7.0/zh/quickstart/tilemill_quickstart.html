

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>TileMill 快速入门 &mdash; OSGeo-Live 7.0
 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '7.0
',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="OSGeo-Live 7.0
 Documentation" href="../../index.html" />
    <link rel="up" title="欢迎访问 OSGeo-Live 7.0" href="../index.html" />
    <link rel="next" title="TinyOWS 快速入门文档" href="tinyows_quickstart.html" />
    <link rel="prev" title="SpatiaLite 快速入门" href="spatialite_quickstart.html" /> 
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>

  </head>
  <body>
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../standards/standards.html">Standards</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
            </ul>
        </div>
    </div>

    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <a class="reference internal image-reference" href="../../_images/logo-tilemill.png"><img alt="project logo" class="align-right" src="../../_images/logo-tilemill.png" style="width: 93.75px; height: 75.0px;" /></a>
<div class="section" id="tilemill">
<h1><a class="toc-backref" href="#id16">TileMill 快速入门</a><a class="headerlink" href="#tilemill" title="Permalink to this headline">¶</a></h1>
<p>　　TileMill 让用户快速而轻松地创建网页地图服务。它使用强大的开源地图渲染函数库 Mapnik（Open Street Map 和 MapQuest 同样使用它）并以 CartoCSS 为样式配置语言。</p>
<p>　　本文演示：</p>
<blockquote>
<div><ul class="simple">
<li>从 PostGIS 添加图层</li>
<li>配置样式</li>
<li>添加工具提示</li>
<li>编辑图例</li>
<li>输出地图</li>
</ul>
</div></blockquote>
<div class="contents topic" id="id1">
<p class="topic-title first">目录</p>
<ul class="simple">
<li><a class="reference internal" href="#tilemill" id="id16">TileMill 快速入门</a><ul>
<li><a class="reference internal" href="#id2" id="id17">新建项目</a></li>
<li><a class="reference internal" href="#id3" id="id18">添加图层</a></li>
<li><a class="reference internal" href="#id4" id="id19">设置工程的默认渲染方式</a></li>
<li><a class="reference internal" href="#id5" id="id20">样式配置</a></li>
<li><a class="reference internal" href="#id6" id="id21">条件性样式</a></li>
<li><a class="reference internal" href="#id7" id="id22">工具提示</a></li>
<li><a class="reference internal" href="#id8" id="id23">图例</a></li>
<li><a class="reference internal" href="#id9" id="id24">输出地图</a></li>
<li><a class="reference internal" href="#id11" id="id25">其它尝试</a></li>
<li><a class="reference internal" href="#id15" id="id26">其它信息</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id17">新建项目</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>启动 TileMill 并选择 “New project” 新建项目。</li>
</ol>
<a class="reference internal image-reference" href="../../_images/tilemill_newproject.png"><img alt="../../_images/tilemill_newproject.png" src="../../_images/tilemill_newproject.png" style="width: 422.8px; height: 172.2px;" /></a>
<p>2- 输入示例信息并点击 “Add”：</p>
<a class="reference internal image-reference" href="../../_images/tilemill_projectinfo.png"><img alt="../../_images/tilemill_projectinfo.png" src="../../_images/tilemill_projectinfo.png" style="width: 417.2px; height: 214.2px;" /></a>
<p><strong>Filename:</strong>   tilemill_quickstart</p>
<p><strong>Name:</strong>       TileMill Quickstart OSGeo Live</p>
<p><strong>Description:</strong>        Quickstart from OSGeo Live</p>
<p><strong>Default Data:</strong>       Leave selected</p>
<ol class="arabic simple" start="3">
<li>双击新项目打开。新建项目包含了一个默然图层 &nbsp;#countries&nbsp;并以 CartoCSS 配置样式。</li>
</ol>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id18">添加图层</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>　　TileMill 可以从文件、SQLite 和 PostGIS 读取图层。这里演示从 PostGIS 读取 OSM 数据。演示假设您已经熟悉 OSM 数据的结构。您可以通过 pgAdminIII 或 QGIS 、Open Jump 等桌面 GIS 系统了解 OSM 数据。</p>
<ol class="arabic simple">
<li>从 PostGIS 导入数据。首先，点击图层按钮（|LAYER|）并选择 &#8216;+ Add layer&#8217; 添加图层。在 &#8216;Add layer&#8217; 中选择数据源类型为 PostGIS：</li>
</ol>
<a class="reference internal image-reference" href="../../_images/tilemill_addpostgis.png"><img alt="../../_images/tilemill_addpostgis.png" src="../../_images/tilemill_addpostgis.png" style="width: 416.5px; height: 351.4px;" /></a>
<ol class="arabic simple" start="2">
<li>从 PostGIS 添加道路（roads）图层。选择图层后点击 &#8216;Save &amp; Style&#8217; 确认：</li>
</ol>
<p><strong>ID:</strong> osm_roads</p>
<p><strong>Class:</strong>      osmroads</p>
<p><strong>Connection:</strong> host=localhost port=5432 user=user password=user dbname=osm_local</p>
<p><strong>Table or subquery:</strong>  planet_osm_roads</p>
<p><strong>Unique key field:</strong>   osm_id</p>
<p><strong>Geometry field:</strong>     way</p>
<p><strong>SRS:</strong>        Select WGS84</p>
<ol class="arabic simple" start="3">
<li>从 PostGIS 导入 osm_line 图层，选中后点击 &#8216;Save &amp; Style&#8217; 确认：</li>
</ol>
<p><strong>ID:</strong> osm_line</p>
<p><strong>Class:</strong>      osmline</p>
<p><strong>Connection:</strong> host=localhost port=5432 user=user password=user dbname=osm_local</p>
<p><strong>Table or subquery:</strong>  planet_osm_line</p>
<p><strong>Unique key field:</strong>   osm_id</p>
<p><strong>Geometry field:</strong>     way</p>
<p><strong>SRS:</strong>        Select WGS84</p>
<ol class="arabic simple" start="4">
<li>从 PostGIS 导入 osm_points 位置点图层，选中后点击 &#8216;Save &amp; Style&#8217; 确认：</li>
</ol>
<p><strong>ID:</strong> osm_points</p>
<p><strong>Class:</strong>      osmpoints</p>
<p><strong>Connection:</strong> host=localhost port=5432 user=user password=user dbname=osm_local</p>
<p><strong>Table or subquery:</strong>  (select osm_id, amenity, way from planet_osm_point where amenity is not null) AS amen</p>
<p><strong>Unique key field:</strong>   osm_id</p>
<p><strong>Geometry field:</strong>     way</p>
<p><strong>SRS:</strong>        Select WGS84</p>
<p>　　在 osm_points 图层中只选择了来自 osm_local 的一个子集，以保证其设施类型（amenity）属性非空。</p>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id19">设置工程的默认渲染方式</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>　　点击 <img alt="TOOLS" src="../../_images/tilemill_confbtn.png" /> 并移动到工程的目标区域设置中心点（center point）。在表格中也可以直接输入中心点和边界（bounds）坐标值。</p>
<a class="reference internal image-reference" href="../../_images/tilemill_project_settings.png"><img alt="../../_images/tilemill_project_settings.png" src="../../_images/tilemill_project_settings.png" style="width: 709.8px; height: 472.5px;" /></a>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id20">样式配置</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>　　TileMill 使用 CartoCSS 语言配置样式。颜色、尺寸、形状等均可由地图显示面板右侧相应的 CartoCSS 代码控制。有关 CartoCSS 语言的使用请参阅其教程。</p>
<p>　　点击 “Save &amp; Style” 导入新的 PostGIS 图层后，若干项目会被自动添加默认值：</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>#osm_point</dt>
<dd><p class="first last">目标图层名称</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>marker-width</dt>
<dd><p class="first last">图标尺寸，单位为像素</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>marker-fill</dt>
<dd><p class="first last">图标颜色，除了直接输入颜色代码，点击面板底部的颜料图标也可以编辑颜色</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>marker-line-color</dt>
<dd><p class="first last">边界线颜色，编辑方法同上</p>
</dd>
</dl>
</li>
</ol>
<dl class="docutils">
<dt>5.- marker-allow-overlap</dt>
<dd>允许标记叠置，若未设为否（false），叠置的标记可能被遮挡而不显示</dd>
</dl>
<p>　　所有这些属性均可以在保存工程后修改。</p>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id21">条件性样式</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>　　条件性样式是根据要素属性变化的样式。本例配置 osm_points 和 osm_roads 的样式，高亮显示具有特定属性的要素。</p>
<p>　　对于点要素，根据其表示的是 &#8216;post_box&#8217;（邮箱）、&#8217;pub&#8217;（酒吧）或 &#8216;bicyle_parking&#8217;（自行车位）等加以不同的图标。该信息位于设施类型（amenity）字段。道路类型（highway）为自行车道（cycleway）的道路要素将使用专门的符号表示。</p>
<p>　　实现上述效果的 CartoCSS 代码如下：</p>
<div class="highlight-python"><pre>Map {
  background-color: #b8dee6;
}

#countries {
  ::outline {
    line-color: #8b9091;
    line-width: 2;
    line-join: round;
  }
  polygon-fill: #fff;
}

#osm_roads {
  line-width:1;
  line-color:#8b9091; //168
}


#osm_line {
  line-width:1;
  line-color:#8b9091;
  [highway='cycleway'] { //red
    line-color:#ff2525; //ff2525
    line-width:3;
    }
}

#osm_poinst {
  marker-width:6;
  marker-fill:#8b9091; //f45
  marker-line-color:#813;
  marker-allow-overlap:true;
  [amenity='post_box'] { //orange
    marker-fill:#ffc425;
    marker-line-color:#a67c0c;
    }
  [amenity='pub'] { //green
    marker-fill:#39e639;
    marker-line-color:#008500;
    }
  [amenity='bicycle_parking'] { //blue
    marker-fill:#85c5d3;
    marker-line-color:#180773;
    }
}</pre>
</div>
<a class="reference internal image-reference" href="../../_images/tilemill_customizedview.png"><img alt="../../_images/tilemill_customizedview.png" src="../../_images/tilemill_customizedview.png" style="width: 630.0px; height: 466.2px;" /></a>
</div>
<div class="section" id="id7">
<h2><a class="toc-backref" href="#id22">工具提示</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>　　工具提示是光标位于某些对象上时动态显示的内容。它可以包含 HTML 代码，显示各类数据、图形等。</p>
<ol class="arabic simple">
<li>在左下角点击 <img alt="POINTER" src="../../_images/tilemill_pointerbtn.png" /> 开启模板（Templates）配置界面。</li>
</ol>
<ol class="arabic simple" start="2">
<li>点击摘要（Teaser）选项卡。摘要信息是光标浮于目标之上而未点击时显示的信息。完整（Full）信息则会在点击时显示。在目标地址（Location）一栏可以填入一个希望打开的 URL 。</li>
<li>选中 &#8216;osm_point&#8217; 图层作为交互层（interactive）。TileMill 目前只能同时处理一个交互层。</li>
<li>花括号标注是该图层的各个字段。这些代码在显示时会替换成相应字段。</li>
<li>边线工具提示代码。以下示例代码可用于摘要。</li>
</ol>
<div class="highlight-python"><pre>Type:{{{amenity}}}&lt;br/&gt;
Name:{{{name}}}</pre>
</div>
<a class="reference internal image-reference" href="../../_images/tilemill_teaser_frm.png"><img alt="../../_images/tilemill_teaser_frm.png" src="../../_images/tilemill_teaser_frm.png" style="width: 322.0px; height: 479.5px;" /></a>
<ol class="arabic simple" start="6">
<li>点击 “Save” 保存配置并刷新。点击 (X) 或键盘 ESC 关闭面板。移动光标查看工具提示的显示情况。</li>
</ol>
<a class="reference internal image-reference" href="../../_images/tilemill_tooltip.png"><img alt="../../_images/tilemill_tooltip.png" src="../../_images/tilemill_tooltip.png" style="width: 210.0px; height: 98.0px;" /></a>
</div>
<div class="section" id="id8">
<h2><a class="toc-backref" href="#id23">图例</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>　　图例可以在地图界面上方便地显示各类要素名称、分类、描述等。它可以使用 HTML，支持图片。</p>
<p>　　为示例项目添加一个图例：</p>
<ol class="arabic simple">
<li>打开模板试图。</li>
<li>图例（Legend）选项卡是默认项。</li>
</ol>
<p>#. 在 Legend 一栏输入内容。</p>
<div class="highlight-python"><pre>&lt;strong&gt;OSGeo Live TileMill Quick Start&lt;/strong&gt;&lt;br/&gt;Points locate different amenities in Nottingham&lt;/br&gt;</pre>
</div>
<a class="reference internal image-reference" href="../../_images/tilemill_legend_text.png"><img alt="../../_images/tilemill_legend_text.png" src="../../_images/tilemill_legend_text.png" style="width: 632.1px; height: 466.2px;" /></a>
<ol class="arabic simple">
<li>Click save and close the panel. You will now see your legend in the bottom right corner of the map.</li>
</ol>
<a class="reference internal image-reference" href="../../_images/tilemill_legend.png"><img alt="../../_images/tilemill_legend.png" src="../../_images/tilemill_legend.png" style="width: 258.3px; height: 134.4px;" /></a>
</div>
<div class="section" id="id9">
<h2><a class="toc-backref" href="#id24">输出地图</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>　　TileMill 支持输出到 MBTiles、PNG、PDF、SVG 和 Mapnik XML 文件。详见 <a class="reference external" href="http://mapbox.com/tilemill/docs/manual/exporting/">输出功能文档</a> 。</p>
<p>　　输出到 MBTiles：</p>
<ol class="arabic simple">
<li>点击 “Export” 按钮。出现一个下拉菜单。</li>
<li>选择 “MBTiles”。显示相应的输出设置。</li>
<li>设置文件名（Filename），默认为工程名。</li>
<li>选择可用的缩放尺寸，本例使用 1-6 较为合适。</li>
<li>设置中心点（Center）。该设置影响载入时默认的中心位置和缩放尺寸。手工输入坐标和点击图形均可，</li>
<li>设置边界（Bounds）。只有边界框内的数据会被输出。手工输入坐标或按住 SHIFT 拖拽均可。默认为全球范围。</li>
<li>点击 “Export” 执行。</li>
<li>完成后，进度条会变为保存（Save）按钮，点击保存至指定目录。</li>
</ol>
<a class="reference internal image-reference" href="../../_images/tilemill_viewexports.png"><img alt="../../_images/tilemill_viewexports.png" src="../../_images/tilemill_viewexports.png" style="width: 279.3px; height: 137.2px;" /></a>
<p>　　在菜单中选择 <em class="menuselection">Help ‣ Welcome</em> 可以回到欢迎界面。</p>
</div>
<div class="section" id="id11">
<h2><a class="toc-backref" href="#id25">其它尝试</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>　　您可以继续尝试其它操作：</p>
<ol class="arabic simple">
<li>添加您自己的样式配置。</li>
<li>从 <a href="#id12"><span class="problematic" id="id13">*</span></a>.CSV 等其它数据源获取数据。您可以参考 <a class="reference external" href="http://mapbox.com/tilemill/docs/crashcourse/introduction/">TileMill 线上教程</a> 。</li>
</ol>
</div>
<div class="section" id="id15">
<h2><a class="toc-backref" href="#id26">其它信息</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<p>　　除了以上演示的基本操作，TileMill 还有众多的功能：</p>
<ul class="simple">
<li>在操作中随时可以点击 <img alt="HELP" src="../../_images/tilemill_helpbtn.png" /> 获取帮助。</li>
</ul>
<ul class="simple">
<li>CartoCSS 语言 <a class="reference external" href="http://mapbox.com/carto/api/2.1.0/">API 文档</a></li>
<li>学习如何 <a class="reference external" href="http://mapbox.com/tilemill/docs/guides/ubuntu-service/">将 TileMill 作为 Ubuntu 环境下的服务</a></li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>

  </body>
</html>