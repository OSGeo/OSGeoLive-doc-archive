<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Guida rapida per Leaflet &mdash; OSGeo-Live 9.0
 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '9.0
',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="OSGeo-Live 9.0
 Documentation" href="../../index.html" />
    <link rel="up" title="OSGeo-Live 9.0 Contents" href="../overview/overview.html" />
    <link rel="next" title="Iniziare con libLAS" href="liblas_quickstart.html" />
    <link rel="prev" title="Kosmo Desktop Quickstart" href="kosmo_quickstart.html" /> 
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>
    <link rel="shortcut icon" href="../../_images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../../_images/favicon.ico" type="image/x-icon">

  </head>
  <body>
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../standards/standards.html">Standards</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
            </ul>
        </div>
    </div>

    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="guida-rapida-per-leaflet">
<h1>Guida rapida per Leaflet<a class="headerlink" href="#guida-rapida-per-leaflet" title="Permalink to this headline">¶</a></h1>
<div class="section" id="esecuzione">
<h2>Esecuzione<a class="headerlink" href="#esecuzione" title="Permalink to this headline">¶</a></h2>
<p>Prima di iniziare questo tutorial dovrete avviare TileLite. Su questo live dvd
potete trovarlo sotto <strong>Geospatial\Spatial Tools\Start Mapnik &amp; TileLite</strong>.
Questo fornirà le tiles di sfondo che saranno usate in questa demo.</p>
<p>Vedere l&#8217;<a class="reference external" href="http://localhost/leaflet-demo.html">esempio</a></p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Se state leggendo questo tutorial al di fuori del live dvd potreste
preferire leggere la demo originale: <a class="reference external" href="http://leafletjs.com/examples/quick-start.html">http://leafletjs.com/examples/quick-start.html</a>,
visto che questa demo usa TileLite del live dvd.</p>
</div>
</div>
<div class="section" id="preparare-la-vostra-pagina">
<h2>Preparare la vostra pagina<a class="headerlink" href="#preparare-la-vostra-pagina" title="Permalink to this headline">¶</a></h2>
<p>Prima di scrivere alcun codice per la mappa, si dovrà effettuale i seguenti passaggi
di preparazione nella vostra pagina:</p>
<ul class="simple">
<li>Includere i file CSS di Leaflet nella sezione head del vostro modello</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/leaflet/leaflet.css&quot;</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!--[if lte IE 8]&gt;</span>
<span class="c">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/leaflet/leaflet.ie.css&quot; /&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Includere il file JavaScript Leaflet:</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/leaflet/leaflet.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>inserire un elemento <strong>div</strong> con un certo <strong>id</strong> dove volete inserire la mappa nella pagine</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Essere sicuri che il contenitore abbia un&#8217;altezza definita, per esempio settandola nel CSS:</li>
</ul>
<div class="highlight-css"><div class="highlight"><pre><span class="nf">#map</span> <span class="p">{</span> <span class="k">height</span><span class="o">:</span> <span class="m">180px</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<p>Ora siete pronti ad inizializzare la mappa e fare qualcosa con essa.</p>
</div>
<div class="section" id="impostare-la-mappa">
<h2>Impostare la Mappa<a class="headerlink" href="#impostare-la-mappa" title="Permalink to this headline">¶</a></h2>
<p>Creare una mappa dell&#8217;Europa con un&#8217;indicazione della conferenza FOSS4G 2013.
Prima verrà inizializzata la mappa e impostare la sua vista alle coordinate
geografiche e un livello di zoom scelti:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">45.52875</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.6632</span><span class="p">],</span> <span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<p>Di default (poichè non abbiamo passato alcuna opzione quando sia crea
l&#8217;istanza mappa), sia il mouse che l&#8217;iterazione del touch sulla mappa sono
abilitati, e ha i controlli di zoom e attribuzione.</p>
<p>Notare che la chiamata setView ritorna anche l&#8217;oggetto mappa - la maggior
parte dei metodi Leaflet come questo quando non ritornano un valore esplicito,
permettono la possibilità d&#8217;incatenamento di metodi come jQuery.</p>
<p>Dopo si aggiungerà un layer di tile da inserire nella mappa.
In questo caso si useranno le tile fornite da TileLite presente nel live dvd.
Notare che usare una mappa di sfondo migliore come OpenStreetMap risulterà
più apprezzato dall&#8217;utente.</p>
<p>Creare un layer di tile solitamente implica impostare il template URL per
le immagine tile, il testo dell&#8217;attribuzione e il numero massimo dei livelli
di zoom del layer:</p>
<div class="highlight-javascript"><div class="highlight"><pre>L.tileLayer(&#39;http://localhost:8012/{z}/{x}/{y}.png,{}).addTo(map);
</pre></div>
</div>
<p>Se avete accesso ad internet potreste volere delle tile più belle come sfondo:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">L</span><span class="p">.</span><span class="nx">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.tile.cloudmade.com/API-key/997/256/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                       <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                       <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Map data &amp;copy; &lt;a href=&quot;http://openstreetmap.org&quot;&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/2.0/&quot;&gt;CC-BY-SA&lt;/a&gt;, Imagery © &lt;a href=&quot;http://cloudmade.com&quot;&gt;CloudMade&lt;/a&gt;&#39;</span>
               <span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Fate attenzione che il codice sia chiamato dopo l&#8217;inclusione di <strong>div</strong> e
<strong>leaflet.js</strong>. Tutto qui! Ora avete un mappa Leaflet funzionante.</p>
<p>È bene notare che Leaflet è indipendente da provider, significa che non
impone una particolare scelta di providers per tiles, e non contiene neanche
una linea di codice specifica per un provider, periò siete liberi di usare
altri provider se lo necessitate.</p>
</div>
<div class="section" id="markers-cerchi-e-poligoni">
<h2>Markers, cerchi e poligoni<a class="headerlink" href="#markers-cerchi-e-poligoni" title="Permalink to this headline">¶</a></h2>
<p>Oltre a layer di tile, potete facilmente aggiungere altre cose alla vostra
mappa, incluso markers, linee, poligoni, cerchi e popups.
Aggiungiamo un marker:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">marker</span><span class="p">([</span><span class="mf">45.52875</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.6632</span><span class="p">]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Aggiungere un cerchio è lo stesso (ad eccetto di specificare il raggio in
metri come secondo argomento), ma potete modificare come verrà visualizzato
passando opzioni come ultimo argomento quando create l&#8217;oggetto:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">circle</span><span class="p">([</span><span class="mf">44.056287</span><span class="p">,</span> <span class="o">-</span><span class="mf">123.07572</span><span class="p">],</span> <span class="mi">25000</span><span class="p">,</span> <span class="p">{</span>
   <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
   <span class="nx">fillColor</span><span class="o">:</span> <span class="s1">&#39;#f03&#39;</span><span class="p">,</span>
   <span class="nx">fillOpacity</span><span class="o">:</span> <span class="mf">0.5</span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Aggiungere un poligono è lo stesso semplice:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">polygon</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">polygon</span><span class="p">([</span>
   <span class="p">[</span><span class="mf">46.01</span><span class="p">,</span> <span class="o">-</span><span class="mf">130.01</span><span class="p">],</span>
   <span class="p">[</span><span class="mf">40.81</span><span class="p">,</span> <span class="o">-</span><span class="mf">128.76</span><span class="p">],</span>
   <span class="p">[</span><span class="mf">44.15</span><span class="p">,</span> <span class="o">-</span><span class="mf">133.23</span><span class="p">]</span>
<span class="p">]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="lavorare-con-i-popups">
<h2>Lavorare con i popups<a class="headerlink" href="#lavorare-con-i-popups" title="Permalink to this headline">¶</a></h2>
<p>Popups sono usualmente usati quando si vuole aggiungere alcune informazioni
ad un particolare oggetto sulla mappa. Leaflet ha un comodo metodo per questo:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">popup</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">popup</span><span class="p">()</span>
   <span class="p">.</span><span class="nx">setLatLng</span><span class="p">([</span><span class="mf">45.52875</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.6632</span><span class="p">])</span>
   <span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;I am a standalone popup.&quot;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">openOn</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Qui si usa <strong>openOn</strong> invece di <strong>addTo</strong> perchè questo permette la chiusura
automatica di un popup precedentemente aperto quando uno nuovo viene selezionato,
questo è molto comodo per l&#8217;usabilità della mappa</p>
</div>
<div class="section" id="rapporti-con-gli-eventi">
<h2>Rapporti con gli eventi<a class="headerlink" href="#rapporti-con-gli-eventi" title="Permalink to this headline">¶</a></h2>
<p>Ogni volta che avviene qualcosa in Leaflet, per esempio l&#8217;utente clicca su
un marker o si cambia lo zoom della mappa, l&#8217;oggetto corrispondente manda
un evento che può essere registrato con una funzione. Questo permette di
reagire all&#8217;iterazione dell&#8217;utente:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">onMapClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;You clicked the map at &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">onMapClick</span><span class="p">);</span>
</pre></div>
</div>
<p>Ogni oggetto ha il proprio set di eventi - controlla la <a class="reference external" href="http://leafletjs.com/reference.html">documentazione</a> per
dettagli. Il primo argomento della funzione che è in ascolto è un oggetto
evento - questo contiene utili informazioni sull&#8217;evento che è accaduto.
Per esempio, l&#8217;oggetto per l&#8217;evento clicca sulla mappe (e nell&#8217;esempio sopra)
ha la proprietà latlng che è la posizione dov&#8217;è avvenuto il click.</p>
<p>Miglioriamo l&#8217;esempio usando un popup invece di un alert:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">popup</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">popup</span><span class="p">();</span>

<span class="kd">function</span> <span class="nx">onMapClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">popup</span>
        <span class="p">.</span><span class="nx">setLatLng</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;You clicked the map at &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
         <span class="p">.</span><span class="nx">openOn</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">onMapClick</span><span class="p">);</span>
</pre></div>
</div>
<p>Si provi cliccando sulla mappa e vedrete le coordinate in un popup. Vedete l&#8217;<a class="reference external" href="http://localhost/leaflet-demo.html">esempio</a> completo</p>
<p>Ora avete imparato le basi di Leaflet e potete iniziare a costruire subito applicazione con mappe! Non dimenticate di vedere la <a class="reference external" href="http://leafletjs.com/reference.html">documentazione</a> dettagliata o altri <a class="reference external" href="http://leafletjs.com/examples.html">esempi</a>.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!--
			<a href="../../en/index.html">English</a> |
			<a href="../../es/index.html">Español</a> |
			<a href="../../ca/index.html">Català</a> |
			<a href="../../fr/index.html">Français</a> |
			<a href="../../de/index.html">Deutsch</a> |
			<a href="../../it/index.html">Italiano</a> |
			<a href="../../pl/index.html">Polski</a> |
			<a href="../../el/index.html">Ελληνικά</a> |
			<a href="../../ru/index.html">Русский</a> |
			<a href="../../zh/index.html">中文</a> |
			<a href="../../id/index.html">Bahasa Indonesia</a> |
			<a href="../../ko/index.html">한국어</a> |
			<a href="../../ja/index.html">日本語</a>
		-->
		<!-- geo-order: West to East, UK to Japan -->
			<a href="javascript:defaultRedirect('en')">English</a> |
<!--			<a href="javascript:defaultRedirect('pt')">Portugus</a> | -->
			<a href="javascript:defaultRedirect('es')">Español</a> |
			<a href="javascript:defaultRedirect('ca')">Català</a> |
			<a href="javascript:defaultRedirect('fr')">Français</a> |
			<a href="javascript:defaultRedirect('de')">Deutsch</a> |
			<a href="javascript:defaultRedirect('it')">Italiano</a> |
			<a href="javascript:defaultRedirect('pl')">Polski</a> |
			<a href="javascript:defaultRedirect('el')">Ελληνικά</a> |
			<a href="javascript:defaultRedirect('ru')">Русский</a> |
			<a href="javascript:defaultRedirect('zh')">中文</a> |
<!--			<a href="javascript:defaultRedirect('id')">Bahasa Indonesia</a> | -->
			<a href="javascript:defaultRedirect('ko')">한국어</a> |
			<a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>

  </body>
</html>